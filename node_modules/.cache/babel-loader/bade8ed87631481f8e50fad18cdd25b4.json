{"remainingRequest":"/Users/iantairea/Desktop/Projects/tt-mobile/node_modules/thread-loader/dist/cjs.js!/Users/iantairea/Desktop/Projects/tt-mobile/node_modules/babel-loader/lib/index.js!/Users/iantairea/Desktop/Projects/tt-mobile/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/iantairea/Desktop/Projects/tt-mobile/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/iantairea/Desktop/Projects/tt-mobile/src/components/DashboardOverview.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/iantairea/Desktop/Projects/tt-mobile/src/components/DashboardOverview.vue","mtime":1586934296723},{"path":"/Users/iantairea/Desktop/Projects/tt-mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/iantairea/Desktop/Projects/tt-mobile/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/iantairea/Desktop/Projects/tt-mobile/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/iantairea/Desktop/Projects/tt-mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/iantairea/Desktop/Projects/tt-mobile/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Vue from \"vue\";\nimport Buefy from \"buefy\";\nimport \"buefy/dist/buefy.css\";\nimport firebase from \"firebase\";\nVue.use(Buefy);\nimport { studentsDb } from \"./firebaseInit\";\nimport Navbar from \"./Navbar.vue\";\nimport ProfileDetails from \"./ProfileDetails.vue\";\nimport ProfileCurrentWork from \"./ProfileCurrentWork.vue\";\nimport ProfileCompletedWork from \"./ProfileCompletedWork.vue\";\nimport ProfileOverviewWork from \"./ProfileOverviewWork.vue\";\nexport default {\n  name: \"Dashboard\",\n  components: {\n    Navbar: Navbar,\n    ProfileDetails: ProfileDetails,\n    ProfileCurrentWork: ProfileCurrentWork,\n    ProfileCompletedWork: ProfileCompletedWork,\n    ProfileOverviewWork: ProfileOverviewWork\n  },\n  data: function data() {\n    return {\n      currentUser: null,\n      students: [],\n      ticked: [],\n      studentsTicked: [],\n      // student: null,\n      loadedStudents: false\n    };\n  },\n  methods: {\n    logout: function logout() {\n      var _this = this;\n\n      firebase.auth().signOut().then(function () {\n        alert(\"signed out\");\n\n        _this.$router.go({\n          path: _this.$router.path\n        });\n      });\n    },\n    checkYear: function checkYear(year) {\n      var yearBox = document.getElementById(year + \"Checkbox\");\n      var yearCheckboxes = document.getElementsByName(year);\n\n      if (yearBox.checked == true) {\n        for (var i = 0, n = yearCheckboxes.length; i < n; i++) {\n          yearCheckboxes[i].checked = true;\n        }\n      } else if (yearBox.checked == false) {\n        for (var i = 0, n = yearCheckboxes.length; i < n; i++) {\n          yearCheckboxes[i].checked = false;\n        }\n      }\n\n      this.tickedStudents();\n    },\n    checkAll: function checkAll() {\n      var allCheckbox = document.getElementById(\"allCheckbox\");\n      var allCheckboxes = document.getElementsByTagName(\"input\");\n\n      if (allCheckbox.checked == true) {\n        for (var i = 0, n = allCheckboxes.length; i < n; i++) {\n          allCheckboxes[i].checked = true;\n        }\n      } else if (allCheckbox.checked == false) {\n        for (var i = 0, n = allCheckboxes.length; i < n; i++) {\n          allCheckboxes[i].checked = false;\n        }\n      }\n\n      this.tickedStudents();\n    },\n    getYearGroup: function getYearGroup(yearlevel) {\n      var yearGroup = this.students.filter(function (student) {\n        return student.school_year == yearlevel;\n      });\n      return yearGroup;\n    },\n    tickedStudents: function tickedStudents() {\n      var _this2 = this;\n\n      //uncheck 'all'\n      // document.getElementById(\"all\").checked = false;\n      var checkedStudents = [];\n      var checkedElements = document.querySelectorAll(\"input:checked\");\n      var uncheckedElements = document.querySelectorAll(\"input:not(:checked)\"); //push nsn of students that are ticked\n\n      checkedElements.forEach(function (el) {\n        checkedStudents.push(Number(el.value));\n      }); //remove students that are un-ticked\n\n      uncheckedElements.forEach(function (uncheckedEl) {\n        if (checkedStudents.indexOf(uncheckedEl.value) !== -1) {\n          checkedStudents.splice(checkedStudents.indexOf(uncheckedEl.value), 1);\n        }\n      });\n      this.ticked = checkedStudents; //filter only the ticked students\n\n      this.studentsTicked = this.students.filter(function (student) {\n        return _this2.ticked.includes(student.nsn);\n      });\n    }\n  },\n  watch: {\n    currentUser: function currentUser(user) {\n      this.$bind(\"students\", // studentsDb.where(\"email\", \"array-contains\", user.email)\n      studentsDb.orderBy(\"school_year\") //LOADS ALL STUDENTS\n      );\n    },\n    students: function students(_students) {\n      this.$set(this, \"loadedStudents\", true);\n    }\n  },\n  mounted: function mounted() {\n    this.$set(this, \"currentUser\", firebase.auth().currentUser); // eslint-disable-next-line\n\n    console.log(\"user is:\", firebase.auth().currentUser.displayName);\n  }\n};",{"version":3,"sources":["DashboardOverview.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"dashboard\">\n    <div v-if=\"students.length > 0\">\n      <!-- navbar -->\n      <!-- <Navbar :student=\"students[0]\"/> -->\n\n      <!-- filter checkboxes -->\n      <div class=\"filterBoxes\">\n        <div class=\"filerCategories\">\n          <label class=\"checkbox\">\n            <input type=\"checkbox\" id=\"allCheckbox\" v-on:click=\"checkAll()\">\n            All\n          </label>\n        </div>\n        <div class=\"filerCategories\">\n          <label class=\"checkbox\">\n            <input type=\"checkbox\" v-on:click=\"checkYear('year9')\" id=\"year9Checkbox\">\n            Year 9\n          </label>\n          <br>\n          <label v-for=\"student in getYearGroup(9)\" :key=\"student.nsn\" class=\"checkbox\">\n            <input type=\"checkbox\" name=\"year9\" :value=\"student.nsn\" v-on:click=\"tickedStudents()\">\n            {{student.given_name}}\n          </label>\n        </div>\n        <div class=\"filerCategories\">\n          <label class=\"checkbox\">\n            <input type=\"checkbox\" v-on:click=\"checkYear('year10')\" id=\"year10Checkbox\">\n            Year 10\n          </label>\n          <br>\n          <label v-for=\"student in getYearGroup(10)\" :key=\"student.nsn\" class=\"checkbox\">\n            <input type=\"checkbox\" name=\"year10\" :value=\"student.nsn\" v-on:click=\"tickedStudents()\">\n            {{student.given_name}}\n          </label>\n        </div>\n        <div class=\"filerCategories\">\n          <label class=\"checkbox\">\n            <input type=\"checkbox\" v-on:click=\"checkYear('year11')\" id=\"year11Checkbox\">\n            Year 11\n          </label>\n          <br>\n          <label v-for=\"student in getYearGroup(11)\" :key=\"student.nsn\" class=\"checkbox\">\n            <input type=\"checkbox\" name=\"year11\" :value=\"student.nsn\" v-on:click=\"tickedStudents()\">\n            {{student.given_name}}\n          </label>\n        </div>\n        <div class=\"filerCategories\">\n          <label class=\"checkbox\">\n            <input type=\"checkbox\" v-on:click=\"checkYear('year12')\" id=\"year12Checkbox\">\n            Year 12\n          </label>\n          <br>\n          <label v-for=\"student in getYearGroup(12)\" :key=\"student.nsn\" class=\"checkbox\">\n            <input type=\"checkbox\" name=\"year12\" :value=\"student.nsn\" v-on:click=\"tickedStudents()\">\n            {{student.given_name}}\n          </label>\n        </div>\n        <div class=\"filerCategories\">\n          <label class=\"checkbox\">\n            <input type=\"checkbox\" v-on:click=\"checkYear('year13')\" id=\"year13Checkbox\">\n            Year 13\n          </label>\n          <br>\n          <label v-for=\"student in getYearGroup(13)\" :key=\"student.nsn\" class=\"checkbox\">\n            <input type=\"checkbox\" name=\"year13\" :value=\"student.nsn\" v-on:click=\"tickedStudents()\">\n            {{student.given_name}}\n          </label>\n        </div>\n      </div>\n\n      <!-- show students -->\n      <div class=\"flexbox\">\n        <div v-for=\"student in studentsTicked\" :key=\"student.nsn\" class=\"flexitem\">\n          <ProfileDetails :student=\"student\" :overview=\"true\" class=\"margin-5\"/>\n          <ProfileCurrentWork :student=\"student\" :overview=\"true\"/>\n          <ProfileCompletedWork :student=\"student\" :overview=\"true\"/>\n          <ProfileOverviewWork :student=\"student\" :overview=\"true\" class=\"margin-20\"/>\n          <hr>\n        </div>\n      </div>\n    </div>\n\n    <!-- if no student loads -->\n    <div v-if=\"students.length == 0\" class=\"flexCenter\">\n      <p>Loading...</p>\n      <br>\n      <p>\n        If page doesn't load,\n        <br>please\n        <a href=\"mailto:i.tairea@taiwananga.co.nz\">email Pa Ian</a>\n        <br>to be entered into the system.\n      </p>\n      <br>\n      <div class=\"button is-light\" id=\"signoutButton\" @click=\"logout\">Sign Out</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Vue from \"vue\";\nimport Buefy from \"buefy\";\nimport \"buefy/dist/buefy.css\";\nimport firebase from \"firebase\";\n\nVue.use(Buefy);\n\nimport { studentsDb } from \"./firebaseInit\";\nimport Navbar from \"./Navbar.vue\";\nimport ProfileDetails from \"./ProfileDetails.vue\";\nimport ProfileCurrentWork from \"./ProfileCurrentWork.vue\";\nimport ProfileCompletedWork from \"./ProfileCompletedWork.vue\";\nimport ProfileOverviewWork from \"./ProfileOverviewWork.vue\";\n\nexport default {\n  name: \"Dashboard\",\n  components: {\n    Navbar,\n    ProfileDetails,\n    ProfileCurrentWork,\n    ProfileCompletedWork,\n    ProfileOverviewWork\n  },\n  data() {\n    return {\n      currentUser: null,\n      students: [],\n      ticked: [],\n      studentsTicked: [],\n      // student: null,\n      loadedStudents: false\n    };\n  },\n  methods: {\n    logout: function() {\n      firebase\n        .auth()\n        .signOut()\n        .then(() => {\n          alert(\"signed out\");\n          this.$router.go({ path: this.$router.path });\n        });\n    },\n    checkYear(year) {\n      var yearBox = document.getElementById(year + \"Checkbox\");\n      var yearCheckboxes = document.getElementsByName(year);\n      if (yearBox.checked == true) {\n        for (var i = 0, n = yearCheckboxes.length; i < n; i++) {\n          yearCheckboxes[i].checked = true;\n        }\n      } else if (yearBox.checked == false) {\n        for (var i = 0, n = yearCheckboxes.length; i < n; i++) {\n          yearCheckboxes[i].checked = false;\n        }\n      }\n      this.tickedStudents();\n    },\n    checkAll() {\n      var allCheckbox = document.getElementById(\"allCheckbox\");\n      var allCheckboxes = document.getElementsByTagName(\"input\");\n      if (allCheckbox.checked == true) {\n        for (var i = 0, n = allCheckboxes.length; i < n; i++) {\n          allCheckboxes[i].checked = true;\n        }\n      } else if (allCheckbox.checked == false) {\n        for (var i = 0, n = allCheckboxes.length; i < n; i++) {\n          allCheckboxes[i].checked = false;\n        }\n      }\n      this.tickedStudents();\n    },\n    getYearGroup(yearlevel) {\n      const yearGroup = this.students.filter(\n        student => student.school_year == yearlevel\n      );\n      return yearGroup;\n    },\n    tickedStudents() {\n      //uncheck 'all'\n      // document.getElementById(\"all\").checked = false;\n\n      var checkedStudents = [];\n      var checkedElements = document.querySelectorAll(\"input:checked\");\n      var uncheckedElements = document.querySelectorAll(\"input:not(:checked)\");\n\n      //push nsn of students that are ticked\n      checkedElements.forEach(el => {\n        checkedStudents.push(Number(el.value));\n      });\n\n      //remove students that are un-ticked\n      uncheckedElements.forEach(uncheckedEl => {\n        if (checkedStudents.indexOf(uncheckedEl.value) !== -1) {\n          checkedStudents.splice(checkedStudents.indexOf(uncheckedEl.value), 1);\n        }\n      });\n\n      this.ticked = checkedStudents;\n      //filter only the ticked students\n      this.studentsTicked = this.students.filter(student => {\n        return this.ticked.includes(student.nsn);\n      });\n    }\n  },\n  watch: {\n    currentUser(user) {\n      this.$bind(\n        \"students\",\n        // studentsDb.where(\"email\", \"array-contains\", user.email)\n        studentsDb.orderBy(\"school_year\") //LOADS ALL STUDENTS\n      );\n    },\n    students(students) {\n      this.$set(this, \"loadedStudents\", true);\n    }\n  },\n  mounted() {\n    this.$set(this, \"currentUser\", firebase.auth().currentUser);\n    // eslint-disable-next-line\n    console.log(\"user is:\", firebase.auth().currentUser.displayName);\n  }\n};\n</script>\n\n<style>\n#app {\n  font-family: \"Avenir\", Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  /* margin-top: 60px; */\n}\n\n.margin-5 {\n  margin: 5px 0px;\n}\n.margin-20 {\n  margin: 20px 0px;\n}\n\n.flexCenter {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100vw;\n  height: 100vh;\n}\n\nhr {\n  margin: 50px 0px;\n}\n\n.filterBoxes {\n  margin: 25px;\n  display: flex;\n}\n\n.filerCategories {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  margin: 2em;\n}\n\n.flexbox {\n  width: 100%;\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.flexitem {\n  /* width: 25%; */\n  min-width: 320px;\n}\n\n@media (max-width: 599px) {\n  .flexitem {\n    width: 100%;\n  }\n}\n</style>\n"],"sourceRoot":"src/components"}]}