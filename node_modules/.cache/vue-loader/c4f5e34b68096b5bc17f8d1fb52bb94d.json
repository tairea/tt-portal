{"remainingRequest":"/Users/iantairea/Desktop/Projects/tt-mobile/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/iantairea/Desktop/Projects/tt-mobile/src/components/SubjectPiechart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/iantairea/Desktop/Projects/tt-mobile/src/components/SubjectPiechart.vue","mtime":1579413346770},{"path":"/Users/iantairea/Desktop/Projects/tt-mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/iantairea/Desktop/Projects/tt-mobile/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/iantairea/Desktop/Projects/tt-mobile/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/iantairea/Desktop/Projects/tt-mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/iantairea/Desktop/Projects/tt-mobile/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { db } from \"./firebaseInit\";\nimport Chart from \"chart.js\";\nimport \"chartjs-plugin-labels\";\n\nexport default {\n  name: \"SubjectPiechart\",\n  props: [\"student\", \"subject\"],\n  data() {\n    return {\n      standards: [],\n      standardStatus: [],\n      pieChart: null,\n      chartCount: null,\n      studentName: null,\n      subjectName: null,\n    };\n  },\n  components: {},\n  computed: {},\n  mounted() {\n    // get standards from firebase\n    this.$bind(\n      \"standards\",\n      db.collection(`/students/${this.student.id}/openCredits`)\n    );\n    this.studentName = this.student.given_name;\n    this.subjectName = this.subject;\n  },\n  watch: {\n    standards: {\n      handler: \"loadChart\"\n    }\n  },\n  methods: {\n    getTotal(status) {\n    \n      const standardsBySubject = this.standards.filter(\n        stnd => stnd.subject == this.subjectName\n      );\n\n      const standardsByStatus = standardsBySubject.filter(\n        stnd => stnd.completed == status\n      );\n\n      const total = standardsByStatus.reduce(\n        (prev /* number */, curr /* standard */) =>\n          Number(prev) + Number(curr.assessmentCredits),\n        0\n      );\n\n      return total;\n    },\n    loadChart() {\n      // console.log(\"loading chart...\");\n      var ctx = document.getElementById(this.studentName+this.subjectName + \"Chart\");\n      // .getContext(\"2d\");\n      this.pieChart = new Chart(ctx, {\n        type: \"pie\",\n        data: {\n          datasets: [\n            {\n              data: [\n                this.getTotal(\"Upcoming\"),\n                this.getTotal(\"Current\"),\n                this.getTotal(\"Achieved\") +\n                  this.getTotal(\"Merit\") +\n                  this.getTotal(\"Excellence\"),\n                this.getTotal(\"Not Achieved\") + this.getTotal(\"Not Submitted\")\n              ],\n              backgroundColor: [\"#209cee\", \"#ffdc57\", \"#23d160\", \"#ff3860\"],\n              label: \"Dataset 1\"\n            }\n          ],\n          labels: [\"Upcoming\", \"Current\", \"Achieved\", \"Not Achieved\"]\n        },\n        options: {\n          responsive: true,\n          maintainAspectRatio: true,\n          legend: {\n            display: false,\n            position: \"bottom\",\n            fullWidth: true,\n            labels: {\n              boxWidth: 10,\n              fontSize: 10\n            }\n          },\n          plugins: {\n            labels: {\n              render: \"value\",\n              fontColor: \"#fff\",\n              position: \"border\"\n              // outsidePadding: 4\n            }\n          }\n        }\n      });\n    }\n  }\n};\n",{"version":3,"sources":["SubjectPiechart.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAaA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SubjectPiechart.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"container\">\n    <!-- <h2 class=\"title is-6 has-text-centered\" v-if=\"!overview\">OVERVIEW</h2> -->\n    <!-- <div class=\"columns is-mobile\"> -->\n    <div class=\"columns\">\n      <!-- Pie Chart.js -->\n      <canvas v-bind:id=\"studentName+subjectName+'Chart'\"></canvas>\n    </div>\n    <!-- </div> -->\n  </div>\n</template>\n\n<script>\nimport { db } from \"./firebaseInit\";\nimport Chart from \"chart.js\";\nimport \"chartjs-plugin-labels\";\n\nexport default {\n  name: \"SubjectPiechart\",\n  props: [\"student\", \"subject\"],\n  data() {\n    return {\n      standards: [],\n      standardStatus: [],\n      pieChart: null,\n      chartCount: null,\n      studentName: null,\n      subjectName: null,\n    };\n  },\n  components: {},\n  computed: {},\n  mounted() {\n    // get standards from firebase\n    this.$bind(\n      \"standards\",\n      db.collection(`/students/${this.student.id}/openCredits`)\n    );\n    this.studentName = this.student.given_name;\n    this.subjectName = this.subject;\n  },\n  watch: {\n    standards: {\n      handler: \"loadChart\"\n    }\n  },\n  methods: {\n    getTotal(status) {\n    \n      const standardsBySubject = this.standards.filter(\n        stnd => stnd.subject == this.subjectName\n      );\n\n      const standardsByStatus = standardsBySubject.filter(\n        stnd => stnd.completed == status\n      );\n\n      const total = standardsByStatus.reduce(\n        (prev /* number */, curr /* standard */) =>\n          Number(prev) + Number(curr.assessmentCredits),\n        0\n      );\n\n      return total;\n    },\n    loadChart() {\n      // console.log(\"loading chart...\");\n      var ctx = document.getElementById(this.studentName+this.subjectName + \"Chart\");\n      // .getContext(\"2d\");\n      this.pieChart = new Chart(ctx, {\n        type: \"pie\",\n        data: {\n          datasets: [\n            {\n              data: [\n                this.getTotal(\"Upcoming\"),\n                this.getTotal(\"Current\"),\n                this.getTotal(\"Achieved\") +\n                  this.getTotal(\"Merit\") +\n                  this.getTotal(\"Excellence\"),\n                this.getTotal(\"Not Achieved\") + this.getTotal(\"Not Submitted\")\n              ],\n              backgroundColor: [\"#209cee\", \"#ffdc57\", \"#23d160\", \"#ff3860\"],\n              label: \"Dataset 1\"\n            }\n          ],\n          labels: [\"Upcoming\", \"Current\", \"Achieved\", \"Not Achieved\"]\n        },\n        options: {\n          responsive: true,\n          maintainAspectRatio: true,\n          legend: {\n            display: false,\n            position: \"bottom\",\n            fullWidth: true,\n            labels: {\n              boxWidth: 10,\n              fontSize: 10\n            }\n          },\n          plugins: {\n            labels: {\n              render: \"value\",\n              fontColor: \"#fff\",\n              position: \"border\"\n              // outsidePadding: 4\n            }\n          }\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.container {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  /* justify-content: center; */\n}\n\n#accordion {\n  width: 90%;\n  display: flex;\n  justify-content: center;\n}\n</style>\n"]}]}